(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Settings"],{"00b9":function(e,t,r){"use strict";var n=r("760e"),a=r.n(n);a.a},"1e23":function(e,t,r){"use strict";var n=r("49c2"),a=r.n(n);a.a},"3caf":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-box"},[r("Sidebar",{staticClass:"sidebar"}),r("MainContent",{staticClass:"main-content"})],1)},a=[],o={menuList:[{name:"profile",label:"个人资料",lang:"L00153",icon:"",enable:!0},{name:"account",label:"账号",lang:"L00049",icon:"",enable:!0}],currentActiveName:"profile"},i=(r("96cf"),r("3b8d")),s=r("2b0e"),c=s["default"].prototype.$X,u={Profile:{doEdit:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.http.post("/Settings/Profile/edit",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},Account:{doEdit:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.http.post("/Settings/Account/edit",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}},d={"Profile/edit":function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,e.next=3,u.Profile.doEdit(r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),"Account/edit":function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,e.next=3,u.Account.doEdit(r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()},m={"currentActiveName/update":function(e,t){e.currentActiveName=t}},l={moduleName:"Settings",store:{namespaced:!0,state:o,actions:d,mutations:m}},p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sidebar-box"},[r("Menu",{staticClass:"menu",attrs:{theme:"light","active-name":e.currentActiveName},on:{"on-select":e.triggerMenu}},e._l(e.menuList.filter(function(e){return e.enable}),function(t,n){return r("MenuItem",{key:n,attrs:{name:t.name}},[t.icon?r("Icon",{attrs:{type:t.icon}}):e._e(),r("span",[e._v(e._s(t.lang?e.$t(t.lang):t.label))])],1)}),1)],1)},f=[],g=r("cebc"),b=r("2f62"),v={name:"Sidebar",computed:Object(g["a"])({},Object(b["c"])("Apps/Settings",{menuList:function(e){return e.menuList},currentActiveName:function(e){return e.currentActiveName}})),methods:{triggerMenu:function(e){var t=this;t.$store.commit("Apps/Settings/currentActiveName/update",e)}}},h=v,w=(r("46b8"),r("2877")),$=Object(w["a"])(h,p,f,!1,null,"92195ed2",null),F=$.exports,L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-content-box"},[r(e.currentComponent,{tag:"component"})],1)},x=[],S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-position":"top"}},[r("FormItem",{attrs:{label:e.$t("L00049"),prop:"account"}},[r("Input",{staticStyle:{width:"200px"},attrs:{placeholder:e.$t("L00045")},on:{"on-change":e.handleChange},model:{value:e.editForm.account,callback:function(t){e.$set(e.editForm,"account",t)},expression:"editForm.account"}})],1),r("FormItem",{attrs:{label:e.$t("L00050"),prop:"name"}},[r("Input",{staticStyle:{width:"200px"},attrs:{placeholder:e.$t("L00046")},on:{"on-change":e.handleChange},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary",disabled:!e.isChange,loading:e.doSaveLoading},on:{click:e.doSave}},[e._v(e._s(e.$t("L00109")))])],1)],1)},P=[],y=r("a4bb"),A=r.n(y),I=(r("7f7f"),{name:"EditProfile",data:function(){return{doSaveLoading:!1,isChange:!1,editForm:{account:"",name:""}}},computed:Object(g["a"])({},Object(b["c"])("Platform",{userInfo:function(e){return e.userInfo}}),{editFormRules:function(){var e=this;return{account:[{required:!0,message:e.$t("L00045"),trigger:"blur"}],name:[{required:!0,message:e.$t("L00046"),trigger:"blur"}]}}}),watch:{userInfo:{handler:function(){var e=this;e.initEditForm()},deep:!0}},methods:{initEditForm:function(){var e=this,t="",r="",n="";e.userInfo&&(t=e.userInfo.id,r=e.userInfo.account,n=e.userInfo.name),e.editForm={id:t,account:r,name:n}},handleChange:function(){for(var e=this,t=A()(e.editForm),r=!1,n=0,a=t.length;n<a;n++){var o=t[n];if(e.editForm[o]!==e.userInfo[o]){r=!0;break}}e.isChange=r},doSave:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,t.$refs["editForm"].validate(function(e){r=e}),void 0===r||r){e.next=5;break}return t.$Message.error(t.$t("L00136")),e.abrupt("return");case 5:return t.doSaveLoading=!0,e.next=8,t.$store.dispatch("Apps/Settings/Profile/edit",t.editForm);case 8:if(n=e.sent,t.doSaveLoading=!1,n&&200===n.code){e.next=12;break}return e.abrupt("return");case 12:t.$Message.success(n.msg),t.$X.utils.bus.$emit("Platform/Admin/refresh");case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}}),k=I,j=Object(w["a"])(k,S,P,!1,null,"bd1a8dc2",null),O=j.exports,N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-position":"top"}},[r("FormItem",{attrs:{label:e.$t("L00154"),prop:"oldPassword"}},[r("Input",{staticStyle:{width:"200px"},attrs:{type:"password",placeholder:e.$t("L00155")},model:{value:e.editForm.oldPassword,callback:function(t){e.$set(e.editForm,"oldPassword",t)},expression:"editForm.oldPassword"}})],1),r("FormItem",{attrs:{label:e.$t("L00156"),prop:"newPassword"}},[r("Input",{staticStyle:{width:"200px"},attrs:{type:"password",placeholder:e.$t("L00157")},model:{value:e.editForm.newPassword,callback:function(t){e.$set(e.editForm,"newPassword",t)},expression:"editForm.newPassword"}})],1),r("FormItem",{attrs:{label:e.$t("L00158"),prop:"confirmNewPassword"}},[r("Input",{staticStyle:{width:"200px"},attrs:{type:"password",placeholder:e.$t("L00159")},model:{value:e.editForm.confirmNewPassword,callback:function(t){e.$set(e.editForm,"confirmNewPassword",t)},expression:"editForm.confirmNewPassword"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary",loading:e.doSaveLoading},on:{click:e.doSave}},[e._v(e._s(e.$t("L00109")))])],1)],1)},R=[],_={name:"EditAccount",data:function(){return{doSaveLoading:!1,editForm:{oldPassword:"",newPassword:"",confirmNewPassword:""}}},computed:Object(g["a"])({},Object(b["c"])("Platform",{userInfo:function(e){return e.userInfo}}),{editFormRules:function(){var e=this;return{oldPassword:[{required:!0,message:e.$t("L00155"),trigger:"blur"},{pattern:e.$X.config.system.passwordReg,message:e.$t("L00160"),trigger:"blur"}],newPassword:[{required:!0,message:e.$t("L00157"),trigger:"blur"},{pattern:e.$X.config.system.passwordReg,message:e.$t("L00160"),trigger:"blur"}],confirmNewPassword:[{required:!0,message:e.$t("L00159"),trigger:"blur"},{pattern:e.$X.config.system.passwordReg,message:e.$t("L00160"),trigger:"blur"},{validator:function(t,r,n){r!==e.editForm.newPassword?n(new Error(e.$t("L00161"))):n()}}]}}}),methods:{doSave:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,t.$refs["editForm"].validate(function(e){r=e}),void 0===r||r){e.next=5;break}return t.$Message.error(t.$t("L00136")),e.abrupt("return");case 5:return t.doSaveLoading=!0,e.next=8,t.$store.dispatch("Apps/Settings/Account/edit",Object(g["a"])({},t.editForm,{id:t.userInfo.id}));case 8:if(n=e.sent,t.doSaveLoading=!1,n&&200===n.code){e.next=12;break}return e.abrupt("return");case 12:t.$Message.success(n.msg),t.$X.utils.bus.$emit("Platform/Admin/refresh");case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},C=_,E=Object(w["a"])(C,N,R,!1,null,"5dea325c",null),M=E.exports,X={name:"MainContent",computed:Object(g["a"])({},Object(b["c"])("Apps/Settings",{currentActiveName:function(e){return e.currentActiveName}}),{currentComponent:function(){var e,t=this;switch(t.currentActiveName){case"profile":e=O;break;case"account":e=M;break}return e}})},q=X,B=(r("1e23"),Object(w["a"])(q,L,x,!1,null,"6027d73e",null)),J=B.exports,z={name:"Settings",components:{Sidebar:F,MainContent:J},created:function(){var e=this;e.$store.registerModule(["Apps",l.moduleName],l.store)},destroyed:function(){var e=this;e.$store.unregisterModule(["Apps",l.moduleName])}},D=z,G=(r("00b9"),Object(w["a"])(D,n,a,!1,null,"55b1ed14",null));t["default"]=G.exports},"46b8":function(e,t,r){"use strict";var n=r("d680"),a=r.n(n);a.a},"49c2":function(e,t,r){},"760e":function(e,t,r){},d680:function(e,t,r){}}]);