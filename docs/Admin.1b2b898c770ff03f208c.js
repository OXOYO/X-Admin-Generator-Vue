(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Admin"],{"02b9":function(e,t,n){e.exports=n.p+"img/c.a1f76750.jpg"},1366:function(e,t,n){"use strict";var r=n("4584"),a=n.n(r);a.a},"14e0":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layout layout-admin"},[n("Layout",[n("Sider",{ref:"Sider",staticClass:"admin-sidebar",style:e.layoutStyle,attrs:{"hide-trigger":"",collapsible:"","collapsed-width":78},model:{value:e.isCollapsed,callback:function(t){e.isCollapsed=t},expression:"isCollapsed"}},[n("div",{staticClass:"admin-logo"},[n("router-link",{attrs:{to:{name:"platform.admin"}}},[e.isCollapsed?[n("span",[e._v(e._s(e.$X.config.system.minTitle))])]:[n("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.$X.config.system.subtitle))])]],2)],1),n("div",{staticClass:"sidebar-menu-wrapper"},[e.isCollapsed?e._e():n("Menu",{ref:"sidebarMenu",staticClass:"sidebar-menu",attrs:{"active-name":e.activeMenuName,"open-names":e.openNames,theme:"light",width:"auto",accordion:""},on:{"on-select":e.triggerMenu}},[e.resourceTree.children&&e.resourceTree.children.length?n("Scrollbar",e._l(e.resourceTree.children,function(t){return n(t.children&&t.children.length?"Submenu":"MenuItem",{key:t.name,tag:"component",class:t.children&&t.children.length?"sub-menu-item":"menu-item",attrs:{name:t.name}},[t.children&&t.children.length?[n("template",{slot:"title"},[n("Icon",{staticClass:"layout-icon",attrs:{type:t.icon,size:16}}),n("span",{staticClass:"layout-text"},[e._v(e._s(t.lang?e.$t(t.lang):t.title))])],1),e._l(t.children,function(t){return n("MenuItem",{key:t.name,staticClass:"menu-item",attrs:{name:t.name}},[n("Icon",{staticClass:"layout-icon",attrs:{type:t.icon,size:16}}),n("span",{staticClass:"layout-text"},[e._v(e._s(t.lang?e.$t(t.lang):t.title))])],1)})]:[n("Icon",{staticClass:"layout-icon",attrs:{type:t.icon,size:16}}),n("span",{staticClass:"layout-text"},[e._v(e._s(t.lang?e.$t(t.lang):t.title))])]],2)}),1):e._e()],1),e.isCollapsed?n("div",{staticClass:"sidebar-menu-collapsed"},[e.resourceTree.children&&e.resourceTree.children.length?n("Scrollbar",[e._l(e.resourceTree.children,function(t,r){return[t.children&&t.children.length?n("Dropdown",{key:r,staticClass:"collased-menu-dropdown",attrs:{placement:t.placement?t.placement:"right-end"},on:{"on-click":e.triggerMenu}},[n("a",{class:{"drop-menu-a":!0,active:e.openNames.find(function(e){return e===t.name})},attrs:{type:"text"},on:{mouseover:function(n){return e.handleMousemove(n,t.children,t)}}},[n("Icon",{staticClass:"layout-icon",attrs:{type:t.icon,size:16}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[e._l(t.children,function(t){return[n("DropdownItem",{key:"drop-"+t.name,attrs:{name:t.name,selected:e.activeMenuName===t.name}},[n("Icon",{staticClass:"layout-icon",attrs:{type:t.icon,size:16}}),n("span",{staticClass:"layout-text"},[e._v(e._s(t.lang?e.$t(t.lang):t.title))])],1)]})],2)],1):n("Tooltip",{key:"drop-menu-"+t.name,attrs:{content:t.lang?e.$t(t.lang):t.title,placement:"right"}},[n("a",{class:{"drop-menu-a":!0,active:e.activeMenuName===t.name},style:{textAlign:"center"},on:{click:function(n){return e.triggerMenu(t.name)}}},[n("Icon",{staticClass:"layout-icon",attrs:{type:t.icon,size:16}})],1)])]})],2):e._e()],1):e._e()],1)]),n("Layout",[n("Header",{staticClass:"admin-header",staticStyle:{padding:"0"}},[n("Icon",{class:["menu-icon",e.isCollapsed?"rotate-icon":""],staticStyle:{margin:"0 20px"},attrs:{type:"md-menu",size:"24"},nativeOn:{click:function(t){return e.toggleCollapse(t)}}}),n("BreadcrumbForAdmin"),n("div",{staticClass:"menu-right"},[n("SwitchLang"),n("SwitchBackground"),n("SwitchUserGroup")],1)],1),n("Content",{staticClass:"admin-content"},[n("router-view",[n("h1",[e._v("TODO CONTENT")])])],1)],1)],1)],1)},a=[],o=(n("7514"),n("e814")),s=n.n(o),i=(n("96cf"),n("3b8d")),c=(n("20d6"),n("6762"),n("2fdb"),n("28a5"),n("7f7f"),n("cebc")),u=n("2f62"),l=n("183a"),d=n("2472"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"switch-box"},[e.userInfo.user_groups&&e.userInfo.user_groups.length?n("Dropdown",{staticClass:"switch-item",on:{"on-click":e.handleGroupChange}},[n("a",{attrs:{href:"javascript:void(0)"}},[e._v("\n      "+e._s(e.userInfo.currentUserGroup.name)+"\n      "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.userInfo.user_groups,function(t,r){return n("DropdownItem",{key:r,attrs:{name:r,selected:t.id===e.userInfo.currentUserGroup.id}},[e._v("\n        "+e._s(t.name)+"\n      ")])}),1)],1):e._e(),n("Dropdown",{staticClass:"switch-item",on:{"on-click":e.handleAction}},[n("a",{attrs:{href:"javascript:void(0)"}},[Object.keys(e.userInfo).length?n("Icon",{attrs:{type:e.userClass[e.userInfo.type]["icon"],title:e.userClass[e.userInfo.type]["title"]}}):e._e(),e._v("\n      "+e._s(e.userInfo.name)+"\n      "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{attrs:{name:"Settings"}},[e._v(e._s(e.$t("L00162")))]),n("DropdownItem",{attrs:{name:"SignOut"}},[e._v(e._s(e.$t("L00012")))])],1)],1)],1)},m=[],p={name:"SwitchUserGroup",computed:Object(c["a"])({},Object(u["c"])("Platform",{userInfo:function(e){return e.userInfo},userClass:function(e){return e.userClass}})),methods:{handleGroupChange:function(e){var t=this,n=t.userInfo.user_groups[e]||{},r=t.$X.config.cookie.getItem("userGroup");t.$X.Cookies.set(r,n.id,{path:t.$X.config.cookie.path}),t.$store.commit("Platform/userInfo/update",Object(c["a"])({},t.userInfo,{currentUserGroup:n}))},handleAction:function(e){var t=this;switch(e){case"SignOut":t.$X.utils.storage.clear.apply(t),t.$store.commit("Platform/userInfo/reset",{}),setTimeout(function(){t.$router.push({name:"platform.home"})},500);break;case"Settings":t.$router.push({name:"platform.admin.Settings"});break}}}},h=p,g=(n("f881"),n("2877")),b=Object(g["a"])(h,f,m,!1,null,"07b0b3b2",null),v=b.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layout-breadcrumb"},[e.breadcrumbList&&e.breadcrumbList.length?n("Breadcrumb",e._l(e.breadcrumbList,function(t){return n("Breadcrumb-item",{key:t.name,attrs:{href:t.path}},[t.icon?n("Icon",{attrs:{type:t.icon}}):e._e(),n("router-link",{attrs:{to:{name:t.name}}},[e._v(e._s(t.lang?e.$t(t.lang):t.title))])],1)}),1):e._e()],1)},y=[],C={name:"BreadcrumbForAdmin",computed:Object(u["c"])("Platform",{resourceMap:function(e){return e.admin.resourceMap},activeMenuName:function(e){return e.admin.activeMenuName},breadcrumbList:function(){var e=this,t=e.handleBreadcrumbList(e.activeMenuName);return t}}),methods:{handleBreadcrumbList:function(e){var t=this,n=[],r=function e(t,r){for(var a,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=function(s,i,c){if(c=r[s],o?t===c.name:t.includes(c.name)){if(n.push({name:c.name,path:"",title:c.title,icon:c.icon,lang:c.lang}),0===c.parent_id)return a=c,"break";var u=r.filter(function(e){return e.id===c.parent_id})[0];if(!u)return a=c,"break";e(u.name,r,!0)}a=c},i=0,c=r.length;i<c;i++){var u=s(i,c,a);if("break"===u)break}};r(e,t.resourceMap["admin-sidebar"],!0);var a=n.find(function(e){return"platform.admin.AdminIndex"===e.name});return a||n.push({name:"platform.admin.AdminIndex",path:"",title:"首页",icon:"home",lang:"R00001"}),n.reverse()}}},$=C,w=(n("1366"),Object(g["a"])($,k,y,!1,null,"506e906c",null)),_=w.exports,I={name:"Admin",components:{SwitchLang:l["a"],SwitchBackground:d["a"],SwitchUserGroup:v,BreadcrumbForAdmin:_},data:function(){return{isCollapsed:!1}},computed:Object(c["a"])({},Object(u["c"])("Platform",{userInfo:function(e){return e.userInfo},background:function(e){return e.background},resourceMap:function(e){return e.admin.resourceMap},activeMenuName:function(e){return e.admin.activeMenuName},unless:function(e){return e.unless}}),{cookieKey:function(){return this.$X.config.cookie.getItem("admin_sidebar_isCollapsed")},resourceTree:function(){var e,t=this;if(t.userInfo&&t.userInfo.name){if(e=t.resourceMap["admin-sidebar"],0!==t.userInfo.type&&t.userInfo.currentUserGroup){var n=t.userInfo.currentUserGroup.resource_id.split(",");e=e.filter(function(e){return n.includes(e.id+"")})}}else e=[];var r=[],a=function e(t,n){for(var r=function(r,a){var o=t[r];if(o.parent_id===n.id){var s,i=n.children.findIndex(function(e){return e.name===o.name});i>-1?s=n.children[i]:(i=n.children.length,s=Object(c["a"])({},o,{children:[]}),n.children.push(s)),n.children[i]=e(t,s)}},a=0,o=t.length;a<o;a++)r(a,o);return n};return r=a(e,{id:0,children:[]}),r},openNames:function(){var e=this,t=e.resourceTree.children||[],n=[],r=function t(r,a){for(var o=0,s=r.length;o<s;o++){var i=r[o];e.activeMenuName===i.name?n.push(a):i.children&&i.children.length&&t(i.children,i.name)}};return e.activeMenuName&&r(t,""),n.length&&e.$nextTick(function(){e.$refs.sidebarMenu&&e.$refs.sidebarMenu.updateOpened&&e.$refs.sidebarMenu.updateOpened()}),n},layoutStyle:function(){var e=this,t={"background-color":"#54364a"};return e.background.name&&e.background.source&&(t={"background-size":"cover","background-image":"url(".concat(e.background.source,")")}),t}}),methods:{init:function(){var e=this;e.getCollapsed(),e.getBaseInfo()},getCollapsed:function(){var e=this;e.isCollapsed="true"===e.$X.Cookies.get(e.cookieKey)},setCollapsed:function(){var e=this;e.$X.Cookies.set(e.cookieKey,e.isCollapsed,{expires:7,path:e.$X.config.cookie.path})},toggleCollapse:function(){var e=this;e.$refs.Sider.toggleCollapse(),e.setCollapsed()},getBaseInfo:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,n,r,a,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,t.$store.dispatch("Platform/user/BaseInfo");case 3:if(n=e.sent,n&&200===n.code){e.next=6;break}return e.abrupt("return");case 6:n.data?(t.$Message.success(n.msg),r=n.data,a=t.$X.config.cookie.getItem("userGroup"),t.userInfo&&t.userInfo.currentUserGroup||(o=t.$X.Cookies.get(a),o?(o=s()(o),i=r.user_groups.find(function(e){return e.id===o})):i=r.user_groups[0],r["currentUserGroup"]=i),r.currentUserGroup?t.$X.Cookies.set(a,r.currentUserGroup.id,{path:t.$X.config.cookie.path}):t.$X.Cookies.remove(a,{path:t.$X.config.cookie.path}),t.$store.commit("Platform/userInfo/update",r)):t.$Message.info(t.$t("L00011"));case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),triggerMenu:function(e){var t=this,n=t.resourceMap["admin-sidebar"].find(function(t){return t.name===e});n&&(["module-system","module-app"].includes(n.type)?t.$router.push({name:n.name}):["module-link"].includes(n.type)&&(n.target?window.open(n.url,n.title):t.$router.push({name:"platform.admin.FramePage",params:{name:n.name,info:n}})))},handleMousemove:function(e,t,n){var r=e.pageY,a=38*t.length,o=r+a<window.innerHeight;n.placement=o?"right-start":"right-end"},doVerifyAccess:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=this,!n.unless.verifyAccess.router.includes(t)){e.next=3;break}return e.abrupt("return",{verifyFlag:!0,resources:null});case 3:return e.next=5,n.$store.dispatch("Platform/user/access/verify",{name:t});case 5:if(r=e.sent,r&&200===r.code){e.next=8;break}return e.abrupt("return",{verifyFlag:!1,resources:[]});case 8:return a=!!r.data.verifyFlag,a||n.$Message.error(r.msg),e.abrupt("return",{verifyFlag:a,resources:r.data.resources||[]});case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),updateActiveMenu:function(e){var t=this,n=t.resourceMap["admin-sidebar"].find(function(t){return t.name===e.name});t.$store.commit("Platform/admin/activeMenuName/update",n?n.name:"")}},created:function(){var e=this;e.init(),e.$X.utils.bus.$on("Platform/Admin/refresh",function(){setTimeout(function(){window.location.reload()},500)})},mounted:function(){var e=this;e.updateActiveMenu(e.$route)},beforeRouteUpdate:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n,r){var a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=this,e.next=3,a.doVerifyAccess(t.name);case 3:o=e.sent,o.verifyFlag?(a.updateActiveMenu(t),null!==o.resources&&a.$store.commit("Platform/userInfo/resources/update",o.resources),r()):(a.$X.utils.storage.clear.apply(a),a.$store.commit("Platform/userInfo/reset",{}),setTimeout(function(){a.$router.push({name:"platform.home"})},500));case 5:case"end":return e.stop()}},e,this)}));function t(t,n,r){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){var e=this;e.$X.utils.bus.$off("Platform/Admin/refresh")}},M=I,x=(n("7b71"),Object(g["a"])(M,r,a,!1,null,null,null));t["default"]=x.exports},"183a":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"switch-box"},[n("Dropdown",{staticClass:"switch-item",on:{"on-click":e.handleChange}},[n("a",{attrs:{href:"javascript:void(0)"}},[e._v("\n      "+e._s(e.localeLabel)+"\n      "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.$X.langs.label,function(t,r){return n("DropdownItem",{key:r,attrs:{name:r,selected:r===e.locale}},[e._v("\n        "+e._s(t)+"\n      ")])}),1)],1)],1)},a=[],o={name:"SwitchLang",data:function(){return{locale:""}},computed:{localeLabel:function(){var e=this;return e.$X.langs.label[e.locale]}},methods:{init:function(){var e=this;e.locale=e.$X.locale},handleChange:function(e){var t=this,n=t.$X.config.cookie.getItem("locale");t.$X.Cookies.set(n,e,{expires:7,path:t.$X.config.cookie.path}),t.$i18n.locale=t.$X.langs.locale=t.locale=e}},created:function(){var e=this;e.init()}},s=o,i=(n("e911"),n("2877")),c=Object(i["a"])(s,r,a,!1,null,"1eb5181b",null);t["a"]=c.exports},"20d6":function(e,t,n){"use strict";var r=n("5ca1"),a=n("0a49")(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),r(r.P+r.F*s,"Array",{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(o)},2472:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"switch-box"},[n("Dropdown",{staticClass:"switch-item",attrs:{trigger:"click"},on:{"on-click":e.handleChange}},[n("a",{staticClass:"current",attrs:{href:"javascript:void(0)"}},[n("img",{attrs:{src:e.background.source,alt:""}}),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.backgroundMap,function(t,r){return n("DropdownItem",{key:r,attrs:{name:r,selected:r===e.background.name}},[n("img",{attrs:{src:t,alt:""}})])}),1)],1)],1)},a=[],o=(n("7f7f"),n("a4bb")),s=n.n(o),i={name:"SwitchBackground",data:function(){return{background:{name:"",source:null},backgroundMap:{a:n("376a"),b:n("4ca7"),c:n("02b9"),d:n("8002"),e:n("f828"),f:n("3c60"),g:n("490b"),h:n("fa43"),i:n("e2d5"),j:n("8cae")}}},computed:{cookieKey:function(){return this.$X.config.cookie.getItem("background")}},methods:{init:function(){var e=this,t=e.$X.Cookies.get(e.cookieKey),n=s()(e.backgroundMap);e.handleChange(t||n[0])},handleChange:function(e){var t=this;t.$X.Cookies.set(t.cookieKey,e,{expires:7,path:t.$X.config.cookie.path}),t.background={name:e,source:t.backgroundMap[e]},t.$store.commit("Platform/background/switch",t.background)}},created:function(){var e=this;e.init()}},c=i,u=(n("e9f3"),n("2877")),l=Object(u["a"])(c,r,a,!1,null,"4194f9dd",null);t["a"]=l.exports},"376a":function(e,t,n){e.exports=n.p+"img/a.f5e4b115.jpg"},"3c60":function(e,t,n){e.exports=n.p+"img/f.ef5b0850.jpg"},4584:function(e,t,n){},"490b":function(e,t,n){e.exports=n.p+"img/g.0904aeb2.jpg"},"4ca7":function(e,t,n){e.exports=n.p+"img/b.dceb4357.jpg"},"61bd":function(e,t,n){},"7b71":function(e,t,n){"use strict";var r=n("61bd"),a=n.n(r);a.a},8002:function(e,t,n){e.exports=n.p+"img/d.9edf1792.jpg"},"8cae":function(e,t,n){e.exports=n.p+"img/j.49e4cce1.jpg"},b7c3:function(e,t,n){},e2d5:function(e,t,n){e.exports=n.p+"img/i.f890b09d.jpg"},e911:function(e,t,n){"use strict";var r=n("f6e2"),a=n.n(r);a.a},e9f3:function(e,t,n){"use strict";var r=n("b7c3"),a=n.n(r);a.a},f4ca:function(e,t,n){},f6e2:function(e,t,n){},f828:function(e,t,n){e.exports=n.p+"img/e.78a730e3.jpg"},f881:function(e,t,n){"use strict";var r=n("f4ca"),a=n.n(r);a.a},fa43:function(e,t,n){e.exports=n.p+"img/h.c7569ad7.jpg"}}]);